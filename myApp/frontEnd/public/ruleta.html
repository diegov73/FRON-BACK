<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">   
        <link rel="stylesheet" href="./css/style.css"> 
        <link rel="stylesheet" href="ruleta_styles.css">
    </head>

    <body>
        
    <ul class="barraSuperior">
        <li class="izq">All in Casino</li>
        <a class="enlace" href="/perfil"><li class="der" id="cuenta">{{nombre}}</li></a>
        <a class="enlace" href="/wallet"><li class="der" id="saldo">{{saldo}}$</li></a>
   </ul>

    <div class="TotalRuleta">
        <div class="container">
            <canvas id="roulette" width="450" height="450"></canvas>
        <br>   
            <button id="spin-btn">Girar</button>
            <h2 id="resultNumber"></h2>
            <h2 id="resultMoney"></h2>
        </div>

        <div class="containerRuleta">
            
            <!-- 1. LA TABLA DE JUEGO -->
            <div class="table" id="tablaRuleta">
                
                <div class="cell bet-column" data-bet="col3" style="grid-row: 1 / 2; grid-column: 14 / 15;">2 to 1</div>
                <div class="cell bet-column" data-bet="col2" style="grid-row: 2 / 3; grid-column: 14 / 15;">2 to 1</div>
                <div class="cell bet-column" data-bet="col1" style="grid-row: 3 / 4; grid-column: 14 / 15;">2 to 1</div>

                <div class="cell bet-dozen" data-bet="1st12" style="grid-row: 4 / 5; grid-column: 2 / span 4;">1ros 12</div>
                <div class="cell bet-dozen" data-bet="2nd12" style="grid-row: 4 / 5; grid-column: 6 / span 4;">2dos 12</div>
                <div class="cell bet-dozen" data-bet="3rd12" style="grid-row: 4 / 5; grid-column: 10 / span 4;">3ros 12</div>

                <div class="cell bet-simple" data-bet="low" style="grid-row: 5 / 6; grid-column: 2 / span 2;">1-18</div>
                <div class="cell bet-simple" data-bet="even" style="grid-row: 5 / 6; grid-column: 4 / span 2;">Par</div>
                <div class="cell bet-simple num-red" data-bet="red" style="grid-row: 5 / 6; grid-column: 6 / span 2;"></div>
                <div class="cell bet-simple num-black" data-bet="black" style="grid-row: 5 / 6; grid-column: 8 / span 2;"></div>
                <div class="cell bet-simple" data-bet="odd" style="grid-row: 5 / 6; grid-column: 10 / span 2;">Impar</div>
                <div class="cell bet-simple" data-bet="high" style="grid-row: 5 / 6; grid-column: 12 / span 2;">19-36</div>
            </div>
            
            <!-- 2. LOS CONTROLES DE APUESTA (Fichas, Total, Limpiar) -->
            <div class="controles-integrados">
                <label>Valor de las fichas: </label>
                <div class="espacio" id="chip-selector">
                    <div class="chip selected" data-value="1">1</div>
                    <div class="chip" data-value="5">5</div>
                    <div class="chip" data-value="10">10</div>
                    <div class="chip" data-value="25">25</div>
                    <div class="chip" data-value="100">100</div>
                </div>
                
                <div id="total-bet">Total apostado: <span id="total-amount">0</span></div>
                <button id="clear-btn">Limpiar apuestas</button>
                <div id="selected-numbers">Apuestas: <span id="numbers-list">Ninguna</span></div>
            </div>

            <!-- 3. EL HISTORIAL (MODIFICADO) -->
            <div class="historial-integrado">
                
                <!-- Título único -->
                <h3 class="rr-subtitulo">Últimas 5 Partidas</h3>

                <!-- La lista <ul> de números ganadores se ha ELIMINADO -->

                <!-- Tabla de apuestas MODIFICADA -->
                <table class="rr-tabla">
                    <thead> 
                        <tr>
                            <!-- NUEVA COLUMNA -->
                            <th>Número Ganador</th> 
                            <th>Tipo de Apuesta</th>
                            <th>Monto</th>
                            <th>Variación Saldo</th>
                        </tr> 
                    </thead>
                    <tbody>
                        <!-- Bucle sobre el NUEVO array 'historialDePartidas' -->
                        {{#each historialDePartidas}}
                        <tr>
                            <!-- NUEVA CELDA para el número ganador -->
                            <td>
                                <!-- Asumo que tienes clases CSS 'color-red', 'color-black', etc. -->
                                <span class="{{this.numeroColor}}">
                                    {{this.numeroGanador}} ({{this.numeroColorTexto}})
                                </span>
                            </td>
                            <td>{{this.numeros}}</td>
                            <td>{{this.monto}}</td>
                            <td>{{this.variacion}}</td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>

        </div>
    </div>     
        
    <form id="resultado-form" action="ruleta" method="post">
        <input type="hidden" id="numeroGanador" name="numeroGanador">
        <input type="hidden" id="colorGanador" name="colorGanador">
        <input type="hidden" id="tipoApuesta" name="tipoApuesta">
        <input type="hidden" id="totalApostado" name="totalApostado">
        <input type="hidden" id="saldoGanado" name="resultado">
    </form>

    <script src="./js/ruleta.js"></script>
    </body>
</html>